<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Viral Video Hub</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  background:#020617;
  font-family:system-ui;
  color:#e5e7eb;
}
.gallery{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:1rem;
  padding:1rem;
}
.card{
  background:#0f172a;
  border-radius:16px;
  overflow:hidden;
  box-shadow:0 10px 30px rgba(0,0,0,.5);
}
.thumb{
  position:relative;
  aspect-ratio:9/16;
  background:#000;
}
.thumb canvas{
  width:100%;
  height:100%;
  object-fit:cover;
}
.thumb::after{
  content:"â–¶";
  position:absolute;
  inset:0;
  display:grid;
  place-items:center;
  font-size:3rem;
  color:white;
  background:rgba(0,0,0,.35);
}
.card-content{
  padding:.6rem;
}
.card-content p{
  font-size:.7rem;
  color:#9ca3af;
  margin:.3rem 0;
}
.watch-btn{
  display:block;
  text-align:center;
  padding:.6rem;
  border-radius:12px;
  background:linear-gradient(90deg,#38bdf8,#22c55e);
  color:#020617;
  font-weight:800;
  text-decoration:none;
}
</style>
</head>

<body>

<h2 style="text-align:center;padding:1rem">ðŸ”¥ Viral Video Hub</h2>

<main class="gallery" id="gallery"></main>

<script>
const username = "tattooladys-vid";
const repo = "tattooladys-vid.github.io";

const api = `https://api.github.com/repos/${username}/${repo}/contents/`;
const gallery = document.getElementById("gallery");

fetch(api)
.then(res => res.json())
.then(files => {
  files
    .filter(file => file.name.endsWith(".mp4"))
    .forEach(file => {

      // âœ… URL VIDEO BENAR (TANPA SLASH AKHIR)
      const videoURL = `https://${username}.github.io/${file.name}`;

      // CARD
      const card = document.createElement("div");
      card.className = "card";

      // THUMB
      const thumb = document.createElement("div");
      thumb.className = "thumb";

      const canvas = document.createElement("canvas");
      thumb.appendChild(canvas);

      // VIDEO (untuk ambil thumbnail)
      const video = document.createElement("video");
      video.src = videoURL;
      video.crossOrigin = "anonymous";
      video.muted = true;
      video.playsInline = true;

      video.addEventListener("loadeddata", () => {
        const ctx = canvas.getContext("2d");
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
      });

      // CONTENT
      const content = document.createElement("div");
      content.className = "card-content";
      content.innerHTML = `
        <p>${file.name}</p>
        <a class="watch-btn" href="${videoURL}">Watch Now</a>
      `;

      card.appendChild(thumb);
      card.appendChild(content);
      gallery.appendChild(card);
    });
})
.catch(err => {
  gallery.innerHTML = "<p style='color:red'>Failed load videos</p>";
  console.error(err);
});
</script>

</body>
</html>
